app.post("/listings/:id/reviews", 
    validateReview,
    wrapAsync(async(req,res)=>{
        console.log(req.body);

        let listing = await Listing.findById(req.params.id);
        let newReview = new Review(req.body.review);

        // Add the new review to the listing's reviews array
        listing.reviews.push(newReview);

        // Save the new review and the listing
        await newReview.save();
        await listing.save();
        
        console.log("New Review Saved");
        console.log(listing.reviews);
        
        // Redirect to the listing page
        res.redirect(`/listings/${listing._id}`);
}));